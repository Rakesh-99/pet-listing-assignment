import{G as S,d as R,u as g,r as o,j as e,M as u,N as f,g as j,e as b,f as y,_ as G}from"./index-C9RR207J.js";import{S as V,a as N}from"./Spinner-GwiIRNxh.js";function q(a){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",strokeWidth:"2",d:"M6,12.4 L18,12.4 M12.6,7 L18,12.4 L12.6,17.8"},child:[]}]})(a)}function v(a){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",strokeWidth:"2",d:"M6,12.4 L18,12.4 M12.6,7 L18,12.4 L12.6,17.8",transform:"matrix(-1 0 0 1 24 0)"},child:[]}]})(a)}const w="https://pets-v2.dev-apis.com/pets",_=()=>{const a=R(),{isLoading:P,error:h,pets:n=[]}=g(t=>t.pets),{theme:d}=g(t=>t.theme),[r,p]=o.useState(0),[k]=o.useState(63),x=Math.floor(k/10),[i,L]=o.useState({breed:"",animal:"",location:""});o.useEffect(()=>{(async()=>{try{a(j());const s=await N.get(`${w}?page=${r}`);if(s.data){const l=s.data.pets;a(b(l))}}catch(s){return a(y(s.message)),G.error(s.message),!1}})()},[a,r]);const z=()=>{r<x&&p(r+1)},$=()=>{r>0&&p(r-1)},m=t=>{const{name:s,value:l}=t.target;L({...i,[s]:l})},C=n?[...new Set(n.map(t=>t.breed))]:[],F=n?[...new Set(n.map(t=>t.animal))]:[],M=n?[...new Set(n.map(t=>t.city))]:[],B=t=>{t.preventDefault();const s=new URLSearchParams(location.search);s.set("animal",i==null?void 0:i.animal),s.set("breed",i==null?void 0:i.breed),s.set("location",i==null?void 0:i.location);const l=s.toString();(async()=>{try{a(j());const c=await N.get(`${w}?${l}`);if(c){const E=c.data.pets;a(b(E))}}catch(c){console.log(c.message),a(y(c.message))}})()};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full min-h-screen",children:[e.jsxs("div",{className:"flex flex-col items-center gap-5 my-5 justify-center ",children:[e.jsx("h1",{className:"text-center md:text-5xl text-2xl   text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600",children:"Search Pets"}),e.jsxs("form",{className:"flex gap-5  flex-col md:flex-row items-center relative my-5",onSubmit:B,children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"my-1 text-sm font-thin text-gray-400",children:"Search by Breed"}),e.jsxs("select",{name:"breed",className:`border transition-all py-1 px-3 rounded-sm ${d==="dark"?"bg-zinc-600 text-white":"bg-gray-100 text-black"}`,onChange:m,defaultValue:"Select Breed",children:[e.jsx("option",{disabled:!0,children:"Select breed"}),C.map((t,s)=>e.jsx("option",{value:t,children:t},s))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"my-1 text-sm font-thin text-gray-400",children:"Search by animal"}),e.jsxs("select",{name:"animal",className:`border transition-all py-1 px-3 rounded-sm ${d==="dark"?"bg-zinc-600 text-white":"bg-gray-100 text-black"}`,onChange:m,defaultValue:"Select animal",children:[e.jsx("option",{disabled:!0,children:"Select animal"}),F.map((t,s)=>e.jsx("option",{value:t,children:t},s))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"my-1 text-sm font-thin text-gray-400",children:"Search by location"}),e.jsxs("select",{name:"location",className:`border transition-all py-1 px-3 rounded-sm ${d==="dark"?"bg-zinc-600 text-white":"bg-gray-100 text-black"}`,onChange:m,defaultValue:"Select location",children:[e.jsx("option",{disabled:!0,children:"Select location"}),M.map((t,s)=>e.jsx("option",{value:t,children:t},s))]})]}),e.jsx("div",{className:"flex mt-7 items-center justify-center",children:e.jsx("button",{type:"submit",className:"font-semibold   py-2 text-sm rounded-r-md bg-gradient-to-r from-purple-400 to-pink-600 border-none px-5 active:scale-95 transition-all",children:"Search"})})]})]}),h?e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs("div",{className:"text-red-600 bg-red-200 py-1 px-5 rounded-bl-full rounded-tr-full gap-3 flex items-center justify-center",children:[e.jsx(u,{size:35}),e.jsx("p",{className:"font-bold",children:h})]})}):e.jsx("div",{className:"text-center",children:P?e.jsx("div",{className:"my-20",children:e.jsx(V,{})}):e.jsx("div",{className:"",children:n&&n.length>0?e.jsx("div",{className:"flex flex-wrap transition-all gap-5 justify-center items-center",children:n.map(t=>e.jsx(f,{to:`/pet-details/${t.id}`,children:e.jsxs("div",{className:`border hover:animate-pulse hover:translate-y-1 shadow-lg transition-all cursor-pointer  px-2 py-2 rounded-md ${d==="dark"?"border-teal-900":"border-gray-300"}`,children:[e.jsx("div",{className:"",children:e.jsx("img",{src:t.images[0],alt:"",className:"w-60 rounded-md  transition-all"})}),e.jsxs("div",{className:"flex items-center py-3 justify-around",children:[e.jsxs("span",{className:"text-xs bg-teal-800 rounded-sm px-2 py-1 font-semibold text-white",children:["Animal : ",t.animal]}),e.jsxs("span",{className:"text-xs bg-teal-800 rounded-sm px-2 py-1 font-semibold text-white",children:["Breed : ",t.breed]})]}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("p",{className:"font-semibold",children:"Name:"}),e.jsx("p",{children:t.name})]}),e.jsx("div",{className:"border hover:bg-teal-700 transition-all hover:text-white  rounded-sm py-1 my-1 border-teal-500",children:e.jsx("button",{className:"text-sm",children:"Read more.."})})]})},t.id))}):e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"w-72 bg-red-500 py-1 gap-1 rounded-sm text-white flex justify-center items-center",children:[e.jsx(u,{size:25}),e.jsx("p",{children:"No pets found !"})]})})})}),n&&n.length>9?e.jsxs("div",{className:"flex justify-center gap-5 transition-all my-10",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:()=>$(),disabled:r===0,className:`active:scale-95 transition-all active:bg-teal-900 text-white flex items-center text-sm font-semibold gap-1 bg-teal-800 w-28 justify-center rounded-sm py-2 ${r===0&&"bg-zinc-700 text-red-400 cursor-not-allowed active:bg-zinc-600"}`,children:[e.jsx(v,{size:22}),e.jsx("p",{children:"Previous"})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:()=>z(),disabled:r===x,className:`text-white active:scale-95 transition-all active:bg-teal-900 flex items-center text-sm font-semibold gap-1 bg-teal-800 w-28 justify-center rounded-sm py-2 ${r===x&&"bg-zinc-700 text-red-400 cursor-not-allowed active:bg-zinc-600"}`,children:[e.jsx("p",{children:"Next"}),e.jsx(q,{size:22})]})})]}):e.jsx("div",{className:"flex justify-center my-10 ",children:e.jsxs(f,{to:"/",className:" flex items-center text-center text-white bg-teal-800 active:bg-teal-900 rounded-sm py-2 px-3 text-sm font-semibold",children:[e.jsx(v,{size:25}),e.jsx("p",{children:"Home"})]})})]})})};export{_ as default};
